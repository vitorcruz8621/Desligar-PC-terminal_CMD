<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Shutdown PC</title>
</head>
<body>
<script
	src="https://code.jquery.com/jquery-3.2.1.min.js"
	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	crossorigin="anonymous"></script>

<!--<script src='jquery.min.js'></script>-->

<script>

funcao_exibirHorario = function(_faltamHoras, _faltamMinutos, _faltamSegundos, _shutdown, _myTime){
	console.log("\n" +
				"Faltam horas = " + _faltamHoras + "\n" +
				"Faltam minutos = " + _faltamMinutos + "\n" +
				"Faltam segundos = " + _faltamSegundos + "\n" +
				"Data Completa = " + _myTime + "\n" +
				"Horario desligamento(segundos)" + _shutdown + "\n");
}

funcao_calcularHorario = function(_faltamHoras, _faltamMinutos, _faltamSegundos, _condicao){
	if(_faltamSegundos != 0) _faltamSegundos = 60 - _faltamSegundos;
	if(_faltamMinutos != 0) _faltamMinutos = 60 - _faltamMinutos;

	if(_condicao == "manha") { _faltamHoras = 12 - _faltamHoras; }
	else if(_condicao == "tarde"){ _faltamHoras = 18 - _faltamHoras; }
	else { console.log('erro;') }

	return ( (_faltamHoras*3600) + (_faltamMinutos*60) + (_faltamSegundos - 120) );

}

funcao_horarioShutdown = function(_condicao){

	var _myTime = new Date();

	var _faltamSegundos = _myTime.getSeconds();
	var _faltamMinutos = _myTime.getMinutes();
	var _faltamHoras = _myTime.getHours() + 1;

	/*if (_faltamHoras < 12) _condicao = "manha";
	else _condicao = "tarde";*/

	var _shutdown = funcao_calcularHorario(_faltamHoras, _faltamMinutos, _faltamSegundos, _condicao);


	switch(_condicao){
		case 'manha':
			$("p:eq(0)").append(
				"Para desligar o computador automaticamente às 12:00" + 
				", copie o comando abaixo e cole-o no seu Prompt de Comando(CMD)"+
				"<br/> <input type='text' value='shutdown -s -t "+_shutdown+"' /h para hibernar>"
			);
			break;

		case 'tarde':
			$("p:eq(1)").append(
				"Para desligar o computador automaticamente às 18:00" + 
				", copie o comando abaixo e cole-o no seu Prompt de Comando(CMD)" +
				"<br/> <input type='text' value='shutdown -s -t "+_shutdown+"' /h para hibernar>" +
				"<p/>Para cancelar o desligamento do computador, insira no CMD o comando:" +
				"<br/> <input type='text' value='shutdown -a'>"
			);
			break;

		default: break;
	}
	
	/*
	se (_shutdown / 3600) > 0 ---> _faltamhoras
	se (_shutdown % 3600) > 0 ---> _faltamMinutos
	se (_shutdown % 3600) > 0 ---> _faltamSegundos
	*/

	_faltamHoras = ((_faltamMinutos / 60) >= 1) ? (_faltamMinutos / 60) : 0;
	_faltamMinutos = ((_shutdown / 60) >= 1) ? (_shutdown / 60) : 0;
	_faltamSegundos = ((_faltamMinutos % 60) >= 1) ? (_faltamMinutos / 60) : 0;	

	funcao_exibirHorario(_faltamHoras, _faltamMinutos, _faltamSegundos, _myTime);

	return;
}
</script>


<button id="btn1">CLICK</button>
<p></p>
<p></p>


<script>
$(document).ready(function(){

	$('#btn1').click(function(){
		$('p').empty();
		var _myTime = new Date();
		if( _myTime.getHours() <= 12 ) funcao_horarioShutdown("manha");
		if( _myTime.getHours() <= 18 ) funcao_horarioShutdown("tarde");
		else $('p:eq(0)').append('<strong>O espediente por hoje acabou.</strong>');
	    //$("#btn1").on('click', function(){});
	});
});
</script>

</body>
</html>